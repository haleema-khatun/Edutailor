<!DOCTYPE html>
<html lang="en">
<script>document.documentElement.dataset.theme = localStorage.getItem('theme') || 'dark';</script>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduTailor â€“ Precision Learning</title>
    <meta name="description"
        content="AI-powered career readiness platform with mock interviews, resume analysis, and adaptive learning">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">

    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>

<body>

    <!-- Navbar -->
    <nav class="navbar-custom">
        <div class="d-flex align-items-center justify-content-between w-100">
            <a href="/" class="navbar-brand-custom text-decoration-none">
                <i class="fas fa-graduation-cap"></i>EduTailor
            </a>

            <div class="d-flex align-items-center gap-1 flex-wrap">
                <a href="/" class="nav-link-custom"><i class="fas fa-home"></i> Home</a>

                {% if session.get("user") %}
                <a href="/dashboard" class="nav-link-custom"><i class="fas fa-th-large"></i> Dashboard</a>
                <a href="/learning" class="nav-link-custom"><i class="fas fa-book-open"></i> Learning</a>
                <a href="/quiz" class="nav-link-custom"><i class="fas fa-question-circle"></i> Quiz</a>
                <a href="/interview" class="nav-link-custom"><i class="fas fa-comments"></i> Interview</a>
                <a href="/resume" class="nav-link-custom"><i class="fas fa-file-alt"></i> Resume</a>
                <a href="/analytics" class="nav-link-custom"><i class="fas fa-chart-line"></i> Analytics</a>

                <span class="user-greeting ms-2">
                    <i class="fas fa-circle"></i> {{ session.get("user") }}
                </span>
                <a href="/logout" class="nav-btn nav-btn-logout ms-1"><i class="fas fa-sign-out-alt"></i> Logout</a>
                <button class="theme-toggle ms-2" id="themeToggle" title="Toggle theme">
                    <i class="fas fa-sun"></i>
                </button>
                {% else %}
                <a href="/login" class="nav-btn nav-btn-login ms-2"><i class="fas fa-sign-in-alt"></i> Login</a>
                <a href="/register" class="nav-btn nav-btn-register"><i class="fas fa-user-plus"></i> Register</a>
                {% endif %}
                <button class="theme-toggle ms-2" id="themeToggleGuest" title="Toggle theme">
                    <i class="fas fa-sun"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- Flash Messages -->
    <div class="main-container">
        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
        {% for category, message in messages %}
        <div class="flash-message flash-{{ category }}">
            <i
                class="fas fa-{% if category == 'error' %}exclamation-circle{% elif category == 'success' %}check-circle{% else %}info-circle{% endif %}"></i>
            {{ message }}
        </div>
        {% endfor %}
        {% endif %}
        {% endwith %}

        {% block content %}{% endblock %}
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Theme Toggle Script -->
    <script>
        (function () {
            function updateIcons(theme) {
                document.querySelectorAll('.theme-toggle i').forEach(function (icon) {
                    icon.className = theme === 'light' ? 'fas fa-moon' : 'fas fa-sun';
                });
            }

            var currentTheme = localStorage.getItem('theme') || 'dark';
            updateIcons(currentTheme);

            document.querySelectorAll('.theme-toggle').forEach(function (btn) {
                btn.addEventListener('click', function () {
                    var html = document.documentElement;
                    var newTheme = html.dataset.theme === 'light' ? 'dark' : 'light';
                    html.dataset.theme = newTheme;
                    localStorage.setItem('theme', newTheme);
                    updateIcons(newTheme);
                });
            });
        })();
    </script>

</body>

</html>